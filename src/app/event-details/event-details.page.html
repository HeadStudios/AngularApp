<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button> <!-- Add this line -->
    </ion-buttons>
    <ion-title>Injustice Details</ion-title>
  </ion-toolbar>
</ion-header>

<div *ngIf="injusticeUrl">
  <p>Public URL: {{ injusticeUrl }}</p>
  <ion-button (click)="copyToClipboard(injusticeUrl)">
    <ion-icon name="copy"></ion-icon> Copy
  </ion-button>
</div>
<ion-content>
  <div class="ion-padding-horizontal">
    <h2>{{ injusticeDetails.title }}</h2>
    <p>
      <ion-icon name="calendar"></ion-icon> <!-- Your date information here -->
    </p>
    <p>
      {{ injusticeDetails.description }}
    </p> 
  </div>

  <!-- Notes Section -->
<div class="ion-padding">
  <ion-list>
    <ion-list-header>
      <ion-label>Notes</ion-label>
    </ion-list-header>
    <ion-item *ngFor="let note of notes">
      <ion-label [innerHTML]="transformNewlines(note.text)">
        <p>Created by: {{ note.created_by_name }} on {{ note.created_at | date }}</p>
      </ion-label>
    </ion-item>
  </ion-list>

  <ion-item>
    <ion-textarea [(ngModel)]="newNoteText" placeholder="Enter new note here"></ion-textarea>
  </ion-item>
  <ion-button (click)="addNote()">Add Note</ion-button>
</div>

  <div *ngIf="injusticeDetails.media && injusticeDetails.media.length > 0">
    <!-- Images Section -->
    <!-- Images Section -->
<ion-list *ngIf="hasImages()">
  <ion-list-header>
    <ion-label>Images</ion-label>
  </ion-list-header>
  <ion-item *ngFor="let item of getImageMedia()">
    <ion-thumbnail slot="start">
      <img [src]="awsBaseUrl + item.attributes.image">
    </ion-thumbnail>
    <ion-label>
      <h2>{{ getFileNameFromUrl(item.attributes.image) }}</h2>
    </ion-label>
    <ion-button [routerLink]="['/product-details-fourth']" [queryParams]="{mediaUrl: awsBaseUrl + item.attributes.image}">
      View Details
    </ion-button>
    <!-- Add any additional action buttons if needed -->
  </ion-item>
</ion-list>

   <!-- Videos Section -->
<ion-list *ngIf="hasVideos()">
  <ion-list-header>
    <ion-label>Videos</ion-label>
  </ion-list-header>
  <ion-item *ngFor="let item of getVideoMedia()">
    <ion-thumbnail slot="start">
      <img src="https://rrdevours.monster/images/app/video.png">
    </ion-thumbnail>
    <ion-label>
      <!-- Use getFileNameFromUrl to display the filename -->
      <h2>{{ getFileNameFromUrl(item.attributes.video) }}</h2>
    </ion-label>
    <ion-button [routerLink]="['/product-details-fourth']" [queryParams]="{mediaUrl: awsBaseUrl + item.attributes.video}">
      View Details
    </ion-button>
    <!-- Add any additional action buttons if needed -->
  </ion-item>
</ion-list>

    <!-- Documents Section -->
<ion-list *ngIf="hasDocuments()">
  <ion-list-header>
    <ion-label>Documents</ion-label>
  </ion-list-header>
  <ion-item *ngFor="let item of getDocumentMedia()">
    <ion-thumbnail slot="start">
      <img src="https://rrdevours.monster/images/app/document.png">
    </ion-thumbnail>
    <ion-label>
      <!-- Use getFileNameFromUrl to display the filename -->
      <h2>{{ getFileNameFromUrl(item.attributes.document) }}</h2>
    </ion-label>
    <!-- View Details Button -->
    <ion-button [routerLink]="['/product-details-fourth']" [queryParams]="{mediaUrl: awsBaseUrl + item.attributes.document}">
      View Details
    </ion-button>
    <!-- Add any additional action buttons if needed -->
  </ion-item>
</ion-list>

  </div>
  
  <!-- File Upload Section -->
  <ion-item>
    <ion-label position="stacked">Custom File Name</ion-label>
    <ion-input [(ngModel)]="customFileName"></ion-input>
  </ion-item>
  <ion-button (click)="openGallery()">Select Image</ion-button>

  <!-- File Upload Section -->
  <ion-item>
    <input type="file" (change)="onFileSelected($event)" accept=".pdf" hidden #fileInput>
    <ion-button (click)="fileInput.click()">Select PDF File</ion-button>
  </ion-item>

  <!-- New Video Upload Section -->
<ion-item>
  <ion-label position="stacked">Custom Video Name</ion-label>
  <ion-input [(ngModel)]="customVideoName"></ion-input>
</ion-item>
<input type="file" accept="video/*" (change)="onVideoSelected($event)" hidden #videoInput>
<ion-button (click)="videoInput.click()">Select Video</ion-button>

</ion-content>

<style>
  ion-item ion-label h2 {
  white-space: normal;
  text-overflow: clip;
  overflow: hidden;
  word-wrap: break-word;
  line-height: 1.4;
}
.preserve-line-breaks {
  white-space: pre-wrap;
}
</style>